<!doctype html>
<html>
<head>
    <title>z42y</title>
    <meta charset="utf-8">
    <meta name="robots" content="index" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
    body {
        margin: 0 auto;
        padding: 2rem;
        max-width: 50em;
    }
    body {
        font-family: "Helvetica", "Arial", sans-serif;
    }
    body {
  line-height: 1.5;
  padding: 4em 1em;
}

h2 {
  margin-top: 1em;
  padding-top: 1em;
}
</style>
</head>

<body>
    <script type="text/javascript">
        if (window != top) {
            top.location.href = location.href;
        }
    </script>
    <h2>java tcp socket为何无法知道对端已主动关闭？</h2>
    <p>
        场景：使用java socket连接上对端tcp服务后，根据需要不定时请求对端数据。
        如果对端服务关闭，此时本端的socket会报IOException或java.net.ConnectException: Connection refused。
        但是服务可能会重启，一般需要本地捕获异常，重新发起一次连接，如果再次失败，抛出异常。
    </p>
    <p>java socket对象提供了isConnected和isClosed，isConnected判断的是</p>
    TODO zookeeper watch, nginx(http long connection?)
</body>

</html>
